<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>

<div class="container">
  <h2>Create form</h2>

  <form  action="/product_update/<%= product._id %>/<%= product.img %>" enctype="multipart/form-data" method="POST">

    <div class="form-group">
      <label>Select Category</label>
      <select class="form-control" name="category_id">
          <% for(var i=0; i<category.length;i++) { %>
              <option value="<%-category[i]._id  %>" <%= product.category_id.toString()  == category[i]._id.toString() ? "selected" : "" %>><%= category[i].name %></option>
            
          <% } %>
      </select>
  </div>
  <div class="form-group">
    <label>Select SubCategory</label>
    <select class="form-control" name="subcategory_id">
        <% for(var i=0; i<subcategory.length;i++) { %>
            <option value="<%-subcategory[i]._id  %>" <%= product.subcategory_id.toString()  == subcategory[i]._id.toString() ? "selected" : "" %>><%= subcategory[i].name %></option>
          
        <% } %>
    </select>
</div>
<div class="form-group">
    <label>Select brand</label>
    <select class="form-control" name="brand_id">
        <% for(var i=0; i<brand.length;i++) { %>
            <option value="<%-brand[i]._id  %>"<%= product.brand_id.toString()  == brand[i]._id.toString() ? "selected" : "" %>><%= brand[i].name %></option>
          
        <% } %>
    </select>
</div>
    <div class="form-group">
      <label for="name">Name</label>
      <input type="text" class="form-control"  placeholder="Enter name" name="name"  value="<%= product.name %>">
    </div>
    
    
    <div class="mr-2">
      <img  class="" id="show" style="width: 100px; height: 100px;" src="/uploads/<%=product.img %>" >
  </div><br>
<div>
<input type="file" name="image" id="image" accept="image/*" style="color: white;"
onchange="showImage(this)" >
</div>
<br>
   
   <div>
   <button type="submit" class="btn btn-primary">Submit</button>
  </div>
  </form>
</div>
<script>
  function showImage(input){
             var file=$("input[type=file]").get(0).files[0];
             if(file)
             {
                 var reader = new FileReader();
                 reader.onload = function(){
                  //    alert(reader.result);
                     $('#show').attr("src",reader.result).attr("width",'150px').attr("height",'150px');
                  //    $('#img').attr("value",reader.result);
                 }
                 reader.readAsDataURL(file); 
             }
           }
          </script> 
</body>
</html>
